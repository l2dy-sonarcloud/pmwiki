/*
  EditHighlight: Syntax highlighting for the PmWiki edit form
  Author (c) 2021 Petko Yotov https://www.pmwiki.org/support
  License: GNU GPLv2 or any more recent version released by the FSF
*/
:root {
  /* base text color and background */
  --pmhi-color: inherit;
  --pmhi-bgcolor: inherit;
  
  /* [=Escaped text=], not processed by PmWiki */
  --pmhi-escaped: #555;
  --pmhi-escapedbg: rgba(0,0,0,.1);
  
  /* (:comment text:)*/
  --pmhi-comment: #777;
  
  /* core meta directives and wikistyles */
  --pmhi-meta: #279;
  --pmhi-metabg: #eff;
  
  /* other core and custom directives */
  --pmhi-directive: black;
  --pmhi-directivebg: #eee;
  
  /* markup expressions */
  --pmhi-mx: #470;
  --pmhi-mxbg: #efe;

  /* !! Headings */
  --pmhi-heading: #800;
  --pmhi-headingbg: #fee;
  
  /* list bullets, line breaks, indents */
  --pmhi-bullet: #470;
  --pmhi-bulletbg: #dfd;
  
  /* simple tables */
  --pmhi-tab: #470;
  --pmhi-tabbg: #dfd;
  
  --pmhi-punct: #a00;
  
  /* i18n strings like $[Edit] or entities like &nbsp; */
  --pmhi-string: #800;
  
  /* attributes and values in directives and wikistyles */
  --pmhi-attr: #b66;
  --pmhi-value: #a00;
  
  /* page (text) variables, template variables, like {*$:Summary} */
  --pmhi-var: #b66;
  
  /* Link URLs, some InterMap links */
  --pmhi-link: #37a;

  /* the textarea of the edit form, and the highlighted block under it */
  --pmhi-border:  1px inset #ccc;
  --pmhi-radpad: 3px;
  --pmhi-fontfamily: monospace;
  --pmhi-fontsize: 14px;
  --pmhi-lineheight: 1.3;
  
  /* the color of the blinking cursor in the textarea */
  --pmhi-caretcolor: red;
}

pre.pmhlt, .pmhlt pre, 
code.pmhlt, .pmhlt code {
  color: var(--pmhi-color);
  background-color: var(--pmhi-bgcolor);
  font-family: var(--pmhi-fontfamily);
  font-size: var(--pmhi-fontsize);
}
.pmhlt .pmtag,
.pmhlt .pmpunctuation,
.pmhlt .pmheading,
.pmhlt .pmbullet {
  font-weight: bold;
}

.pmhlt .pmcomment {
  color: var(--pmhi-comment);
}
.pmhlt .pmmx {
  color: var(--pmhi-mx);
  background-color: var(--pmhi-mxbg);
}
.pmhlt .pmdirective {
  color: var(--pmhi-directive);
  background-color: var(--pmhi-directivebg);
}
.pmhlt .pmstring {
  color: var(--pmhi-string);
}
.pmhlt .pmvar {
  color: var(--pmhi-var);
}
.pmhlt .pmmeta {
  color: var(--pmhi-meta);
  background-color: var(--pmhi-metabg);
}
.pmhlt .pmbullet {
  color: var(--pmhi-bullet);
  background-color: var(--pmhi-bulletbg);
}
.pmhlt .pmtab {
  color: var(--pmhi-tab);
  background-color: var(--pmhi-tabbg);
}
.pmhlt .pmpunctuation {
  color: var(--pmhi-punct);
}
.pmhlt .pmlink{
  color: var(--pmhi-link);
}
.pmhlt .pmheading, .pmhlt .pmhline {
  background-color: var(--pmhi-headingbg);
}
.pmhlt .pmheading  {
  color: var(--pmhi-heading);
}
.pmhlt .pmescaped {
  color: var(--pmhi-escaped);
  background-color: var(--pmhi-escapedbg);
}
.pmhlt .pmattr {
  color: var(--pmhi-attr);
}
.pmhlt .pmvalue {
  color: var(--pmhi-value);
}

#wikiedit #hwrap {
  position: relative;
  border: none;
  padding: 0;
  margin: 0;
}
#wikiedit #text, #wikiedit #htext {
  border: var(--pmhi-border);
  border-radius: var(--pmhi-radpad);
  padding: var(--pmhi-radpad);
  box-sizing: border-box;
  font-family: var(--pmhi-fontfamily);
  font-size: var(--pmhi-fontsize);
  line-height: var(--pmhi-lineheight);
  background-color: transparent;
  width: 100%;
  max-width: 100%;
  margin: 0;
  word-wrap: break-word;
}
#wikiedit #hwrap #htext {
  display: none;
  position: absolute;
  top: 0px;
  left: 0px;
  background-color: var(--pmhi-bgcolor);
  white-space: pre-wrap;
  border-color: transparent;
  overflow: auto;
  user-select: none;
}

#wikiedit #chk_hlt_wrap[data-checked="true"] ~ * #htext {
  display: block;
}
#chk_hlt_wrap {
  float: right;
}
#wikiedit #chk_hlt_wrap[data-checked="true"] ~ * #text,
#wikiedit #chk_hlt_wrap[data-checked="true"] ~ #text {
  position: relative;
  z-index: 2;
  color: transparent;
  caret-color: var(--pmhi-caretcolor);
}
